(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.sitekitExtensions = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(null):"function"==typeof define&&define.amd?define(e(null)):window.stylis=e(null)}(function e(a){"use strict";var c=/^\0+/g,r=/[\0\r\f]/g,s=/: */g,t=/zoo|gra/,i=/([,: ])(transform)/g,n=/,+\s*(?![^(]*[)])/g,l=/ +\s*(?![^(]*[)])/g,o=/ *[\0] */g,f=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,u=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,b=/@(k\w+)\s*(\S*)\s*/,k=/::(place)/g,p=/:(read-only)/g,g=/\s+(?=[{\];=:>])/g,A=/([[}=:>])\s+/g,w=/(\{[^{]+?);(?=\})/g,C=/\s{2,}/g,v=/([^\(])(:+) */g,m=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,$=/([\s\S]*?);/g,y=/-self|flex-/g,O=/[^]*?(:[rp][el]a[\w-]+)[^]*/,j=/stretch|:\s*\w+\-(?:conte|avail)/,z="-webkit-",F="-moz-",N="-ms-",S=59,B=125,W=123,q=40,D=41,E=91,G=93,H=10,I=13,J=9,K=64,L=32,M=38,P=45,Q=95,R=42,T=44,U=58,V=39,X=34,Y=47,Z=62,_=43,ee=126,ae=0,ce=12,re=11,se=107,te=109,ie=115,ne=112,le=111,oe=169,fe=163,he=100,ue=112,de=1,be=1,ke=0,pe=1,ge=1,Ae=1,we=0,Ce=0,ve=0,me=[],xe=[],$e=0,ye=null,Oe=-2,je=-1,ze=0,Fe=1,Ne=2,Se=3,Be=0,We=1,qe="",De="",Ee="";function Ge(e,a,s,t,i){for(var n,l,f=0,h=0,u=0,d=0,g=0,A=0,w=0,C=0,m=0,$=0,y=0,O=0,j=0,Q=0,we=0,xe=0,ye=0,Oe=0,je=0,Ie=s.length,Pe=Ie-1,Qe="",Re="",Te="",Ue="",Ve="",Xe="";we<Ie;){if(w=s.charCodeAt(we),we===Pe&&h+d+u+f!==0&&(0!==h&&(w=h===Y?H:Y),d=u=f=0,Ie++,Pe++),h+d+u+f===0){if(we===Pe&&(xe>0&&(Re=Re.replace(r,"")),Re.trim().length>0)){switch(w){case L:case J:case S:case I:case H:break;default:Re+=s.charAt(we)}w=S}if(1===ye)switch(w){case W:case B:case S:case X:case V:case q:case D:case T:ye=0;case J:case I:case H:case L:break;default:for(ye=0,je=we,g=w,we--,w=S;je<Ie;)switch(s.charCodeAt(je++)){case H:case I:case S:++we,w=g,je=Ie;break;case U:xe>0&&(++we,w=g);case W:je=Ie}}switch(w){case W:for(g=(Re=Re.trim()).charCodeAt(0),y=1,je=++we;we<Ie;){switch(w=s.charCodeAt(we)){case W:y++;break;case B:y--}if(0===y)break;we++}switch(Te=s.substring(je,we),g===ae&&(g=(Re=Re.replace(c,"").trim()).charCodeAt(0)),g){case K:switch(xe>0&&(Re=Re.replace(r,"")),A=Re.charCodeAt(1)){case he:case te:case ie:case P:n=a;break;default:n=me}if(je=(Te=Ge(a,n,Te,A,i+1)).length,ve>0&&0===je&&(je=Re.length),$e>0&&(n=He(me,Re,Oe),l=Me(Se,Te,n,a,be,de,je,A,i,t),Re=n.join(""),void 0!==l&&0===(je=(Te=l.trim()).length)&&(A=0,Te="")),je>0)switch(A){case ie:Re=Re.replace(x,Le);case he:case te:case P:Te=Re+"{"+Te+"}";break;case se:Te=(Re=Re.replace(b,"$1 $2"+(We>0?qe:"")))+"{"+Te+"}",Te=1===ge||2===ge&&Ke("@"+Te,3)?"@"+z+Te+"@"+Te:"@"+Te;break;default:Te=Re+Te,t===ue&&(Ue+=Te,Te="")}else Te="";break;default:Te=Ge(a,He(a,Re,Oe),Te,t,i+1)}Ve+=Te,O=0,ye=0,Q=0,xe=0,Oe=0,j=0,Re="",Te="",w=s.charCodeAt(++we);break;case B:case S:if((je=(Re=(xe>0?Re.replace(r,""):Re).trim()).length)>1)switch(0===Q&&((g=Re.charCodeAt(0))===P||g>96&&g<123)&&(je=(Re=Re.replace(" ",":")).length),$e>0&&void 0!==(l=Me(Fe,Re,a,e,be,de,Ue.length,t,i,t))&&0===(je=(Re=l.trim()).length)&&(Re="\0\0"),(g=Re.charCodeAt(0))+(A=Re.charCodeAt(1))){case ae:break;case oe:case fe:Xe+=Re+s.charAt(we);break;default:if(Re.charCodeAt(je-1)===U)break;Ue+=Je(Re,g,A,Re.charCodeAt(2))}O=0,ye=0,Q=0,xe=0,Oe=0,Re="",w=s.charCodeAt(++we)}}switch(w){case I:case H:if(h+d+u+f+Ce===0)switch($){case D:case V:case X:case K:case ee:case Z:case R:case _:case Y:case P:case U:case T:case S:case W:case B:break;default:Q>0&&(ye=1)}h===Y?h=0:pe+O===0&&(xe=1,Re+="\0"),$e*Be>0&&Me(ze,Re,a,e,be,de,Ue.length,t,i,t),de=1,be++;break;case S:case B:if(h+d+u+f===0){de++;break}default:switch(de++,Qe=s.charAt(we),w){case J:case L:if(d+f+h===0)switch(C){case T:case U:case J:case L:Qe="";break;default:w!==L&&(Qe=" ")}break;case ae:Qe="\\0";break;case ce:Qe="\\f";break;case re:Qe="\\v";break;case M:d+h+f===0&&pe>0&&(Oe=1,xe=1,Qe="\f"+Qe);break;case 108:if(d+h+f+ke===0&&Q>0)switch(we-Q){case 2:C===ne&&s.charCodeAt(we-3)===U&&(ke=C);case 8:m===le&&(ke=m)}break;case U:d+h+f===0&&(Q=we);break;case T:h+u+d+f===0&&(xe=1,Qe+="\r");break;case X:case V:0===h&&(d=d===w?0:0===d?w:d);break;case E:d+h+u===0&&f++;break;case G:d+h+u===0&&f--;break;case D:d+h+f===0&&u--;break;case q:if(d+h+f===0){if(0===O)switch(2*C+3*m){case 533:break;default:y=0,O=1}u++}break;case K:h+u+d+f+Q+j===0&&(j=1);break;case R:case Y:if(d+f+u>0)break;switch(h){case 0:switch(2*w+3*s.charCodeAt(we+1)){case 235:h=Y;break;case 220:je=we,h=R}break;case R:w===Y&&C===R&&(33===s.charCodeAt(je+2)&&(Ue+=s.substring(je,we+1)),Qe="",h=0)}}if(0===h){if(pe+d+f+j===0&&t!==se&&w!==S)switch(w){case T:case ee:case Z:case _:case D:case q:if(0===O){switch(C){case J:case L:case H:case I:Qe+="\0";break;default:Qe="\0"+Qe+(w===T?"":"\0")}xe=1}else switch(w){case q:O=++y;break;case D:0==(O=--y)&&(xe=1,Qe+="\0")}break;case J:case L:switch(C){case ae:case W:case B:case S:case T:case ce:case J:case L:case H:case I:break;default:0===O&&(xe=1,Qe+="\0")}}Re+=Qe,w!==L&&w!==J&&($=w)}}m=C,C=w,we++}if(je=Ue.length,ve>0&&0===je&&0===Ve.length&&0===a[0].length==!1&&(t!==te||1===a.length&&(pe>0?De:Ee)===a[0])&&(je=a.join(",").length+2),je>0){if(n=0===pe&&t!==se?function(e){for(var a,c,s=0,t=e.length,i=Array(t);s<t;++s){for(var n=e[s].split(o),l="",f=0,h=0,u=0,d=0,b=n.length;f<b;++f)if(!(0===(h=(c=n[f]).length)&&b>1)){if(u=l.charCodeAt(l.length-1),d=c.charCodeAt(0),a="",0!==f)switch(u){case R:case ee:case Z:case _:case L:case q:break;default:a=" "}switch(d){case M:c=a+De;case ee:case Z:case _:case L:case D:case q:break;case E:c=a+c+De;break;case U:switch(2*c.charCodeAt(1)+3*c.charCodeAt(2)){case 530:if(Ae>0){c=a+c.substring(8,h-1);break}default:(f<1||n[f-1].length<1)&&(c=a+De+c)}break;case T:a="";default:c=h>1&&c.indexOf(":")>0?a+c.replace(v,"$1"+De+"$2"):a+c+De}l+=c}i[s]=l.replace(r,"").trim()}return i}(a):a,$e>0&&void 0!==(l=Me(Ne,Ue,n,e,be,de,je,t,i,t))&&0===(Ue=l).length)return Xe+Ue+Ve;if(Ue=n.join(",")+"{"+Ue+"}",ge*ke!=0){switch(2!==ge||Ke(Ue,2)||(ke=0),ke){case le:Ue=Ue.replace(p,":"+F+"$1")+Ue;break;case ne:Ue=Ue.replace(k,"::"+z+"input-$1")+Ue.replace(k,"::"+F+"$1")+Ue.replace(k,":"+N+"input-$1")+Ue}ke=0}}return Xe+Ue+Ve}function He(e,a,c){var r=a.trim().split(f),s=r,t=r.length,i=e.length;switch(i){case 0:case 1:for(var n=0,l=0===i?"":e[0]+" ";n<t;++n)s[n]=Ie(l,s[n],c,i).trim();break;default:n=0;var o=0;for(s=[];n<t;++n)for(var h=0;h<i;++h)s[o++]=Ie(e[h]+" ",r[n],c,i).trim()}return s}function Ie(e,a,c,r){var s=a,t=s.charCodeAt(0);switch(t<33&&(t=(s=s.trim()).charCodeAt(0)),t){case M:switch(pe+r){case 0:case 1:if(0===e.trim().length)break;default:return s.replace(h,"$1"+e.trim())}break;case U:switch(s.charCodeAt(1)){case 103:if(Ae>0&&pe>0)return s.replace(u,"$1").replace(h,"$1"+Ee);break;default:return e.trim()+s.replace(h,"$1"+e.trim())}default:if(c*pe>0&&s.indexOf("\f")>0)return s.replace(h,(e.charCodeAt(0)===U?"":"$1")+e.trim())}return e+s}function Je(e,a,c,r){var o,f=0,h=e+";",u=2*a+3*c+4*r;if(944===u)return function(e){var a=e.length,c=e.indexOf(":",9)+1,r=e.substring(0,c).trim(),s=e.substring(c,a-1).trim();switch(e.charCodeAt(9)*We){case 0:break;case P:if(110!==e.charCodeAt(10))break;default:for(var t=s.split((s="",n)),i=0,c=0,a=t.length;i<a;c=0,++i){for(var o=t[i],f=o.split(l);o=f[c];){var h=o.charCodeAt(0);if(1===We&&(h>K&&h<90||h>96&&h<123||h===Q||h===P&&o.charCodeAt(1)!==P))switch(isNaN(parseFloat(o))+(-1!==o.indexOf("("))){case 1:switch(o){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:o+=qe}}f[c++]=o}s+=(0===i?"":",")+f.join(" ")}}return s=r+s+";",1===ge||2===ge&&Ke(s,1)?z+s+s:s}(h);if(0===ge||2===ge&&!Ke(h,1))return h;switch(u){case 1015:return 97===h.charCodeAt(10)?z+h+h:h;case 951:return 116===h.charCodeAt(3)?z+h+h:h;case 963:return 110===h.charCodeAt(5)?z+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return z+h+h;case 978:return z+h+F+h+h;case 1019:case 983:return z+h+F+h+N+h+h;case 883:return h.charCodeAt(8)===P?z+h+h:h;case 932:if(h.charCodeAt(4)===P)switch(h.charCodeAt(5)){case 103:return z+"box-"+h.replace("-grow","")+z+h+N+h.replace("grow","positive")+h;case 115:return z+h+N+h.replace("shrink","negative")+h;case 98:return z+h+N+h.replace("basis","preferred-size")+h}return z+h+N+h+h;case 964:return z+h+N+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return o=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),z+"box-pack"+o+z+h+N+"flex-pack"+o+h;case 1005:return t.test(h)?h.replace(s,":"+z)+h.replace(s,":"+F)+h:h;case 1e3:switch(f=(o=h.substring(13).trim()).indexOf("-")+1,o.charCodeAt(0)+o.charCodeAt(f)){case 226:o=h.replace(m,"tb");break;case 232:o=h.replace(m,"tb-rl");break;case 220:o=h.replace(m,"lr");break;default:return h}return z+h+N+o+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(f=(h=e).length-10,u=(o=(33===h.charCodeAt(f)?h.substring(0,f):h).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|o.charCodeAt(7))){case 203:if(o.charCodeAt(8)<111)break;case 115:h=h.replace(o,z+o)+";"+h;break;case 207:case 102:h=h.replace(o,z+(u>102?"inline-":"")+"box")+";"+h.replace(o,z+o)+";"+h.replace(o,N+o+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===P)switch(h.charCodeAt(6)){case 105:return o=h.replace("-items",""),z+h+z+"box-"+o+N+"flex-"+o+h;case 115:return z+h+N+"flex-item-"+h.replace(y,"")+h;default:return z+h+N+"flex-line-pack"+h.replace("align-content","").replace(y,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==P||122===h.charCodeAt(4))break;case 931:case 953:if(!0===j.test(e))return 115===(o=e.substring(e.indexOf(":")+1)).charCodeAt(0)?Je(e.replace("stretch","fill-available"),a,c,r).replace(":fill-available",":stretch"):h.replace(o,z+o)+h.replace(o,F+o.replace("fill-",""))+h;break;case 962:if(h=z+h+(102===h.charCodeAt(5)?N+h:"")+h,c+r===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(i,"$1"+z+"$2")+h}return h}function Ke(e,a){var c=e.indexOf(1===a?":":"{"),r=e.substring(0,3!==a?c:10),s=e.substring(c+1,e.length-1);return ye(2!==a?r:r.replace(O,"$1"),s,a)}function Le(e,a){var c=Je(a,a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2));return c!==a+";"?c.replace($," or ($1)").substring(4):"("+a+")"}function Me(e,a,c,r,s,t,i,n,l,o){for(var f,h=0,u=a;h<$e;++h)switch(f=xe[h].call(Qe,e,u,c,r,s,t,i,n,l,o)){case void 0:case!1:case!0:case null:break;default:u=f}switch(u){case void 0:case!1:case!0:case null:case a:break;default:return u}}function Pe(e){for(var a in e){var c=e[a];switch(a){case"keyframe":We=0|c;break;case"global":Ae=0|c;break;case"cascade":pe=0|c;break;case"compress":we=0|c;break;case"semicolon":Ce=0|c;break;case"preserve":ve=0|c;break;case"prefix":ye=null,c?"function"!=typeof c?ge=1:(ge=2,ye=c):ge=0}}return Pe}function Qe(a,c){if(void 0!==this&&this.constructor===Qe)return e(a);var s=a,t=s.charCodeAt(0);t<33&&(t=(s=s.trim()).charCodeAt(0)),We>0&&(qe=s.replace(d,t===E?"":"-")),t=1,1===pe?Ee=s:De=s;var i,n=[Ee];$e>0&&void 0!==(i=Me(je,c,n,n,be,de,0,0,0,0))&&"string"==typeof i&&(c=i);var l=Ge(me,n,c,0,0);return $e>0&&void 0!==(i=Me(Oe,l,n,n,be,de,l.length,0,0,0))&&"string"!=typeof(l=i)&&(t=0),qe="",Ee="",De="",ke=0,be=1,de=1,we*t==0?l:function(e){return e.replace(r,"").replace(g,"").replace(A,"$1").replace(w,"$1").replace(C," ")}(l)}return Qe.use=function e(a){switch(a){case void 0:case null:$e=xe.length=0;break;default:switch(a.constructor){case Array:for(var c=0,r=a.length;c<r;++c)e(a[c]);break;case Function:xe[$e++]=a;break;case Boolean:Be=0|!!a}}return e},Qe.set=Pe,void 0!==a&&Pe(a),Qe});

},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _arguments=arguments;function _asyncToGenerator(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function r(o,i){try{var u=n[o](i),s=u.value}catch(e){return void t(e)}if(!u.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}exports.default=eventsConfig;var defaultOpts={log:!1},requestAnimationFrame=function(e){return setTimeout(e,60)},i=0,doTick=function(e){return new Promise(function(n){return window.requestAnimationFrame(function(){return n(e.apply(null,_arguments))})})},eventsNames=[{e:"MouseDown"},{e:"MouseMove",window:!0},{e:"MouseUp",window:!0},{e:"MouseOut"},{e:"MouseOver"},{e:"TouchStart"},{e:"TouchEnd"},{e:"Scroll",window:!0},{e:"Resize",window:!0},{e:"TouchMove"}],doFn=function(e){return e()};function eventsConfig(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign({},defaultOpts,e).log&&console.log;return function(e,n,t,r){return{_create:function(){var e=this,t=arguments;this._events={cancels:{},index:0};var r=this;eventsNames.forEach(function(t){var o=t.e,i="on"+o;if("function"==typeof e[i]){var u="eve"+e._events.index++,s=e[i],a=!0;if(t.window){var c=function(){delete e._events.cancels[u],n(window).off(o.toLowerCase(),s)};e._events.cancels[u]=c,n(window).on(o.toLowerCase(),function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if(a){a=!1;var o=s.apply(r,n);if(null===o&&c(),o&&"number"==typeof o)return setTimeout(function(){a=!0},o);a=!0}})}else{var f=function(){delete e._events.cancels[u],n(window).off(o.toLowerCase(),s)};e._events.cancels[u]=f,e.element.on(o,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if(a){a=!1;var o=s.apply(r,n);if(null===o&&f(),o&&"number"==typeof o)return setTimeout(function(){a=!0},o);a=!0}})}}}),this._events.raf=function(e){return new Promise(function(n){window.requestAnimationFrame(function(){var r=e.apply(void 0,t);n(r)})})}},onTick:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._events.raf){e.next=2;break}return e.abrupt("return");case 2:if("number"!=typeof this._events.raf){e.next=4;break}return e.abrupt("return",this.onTick(n));case 4:if(!this._events.raf){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,doTick(n);case 8:"number"==typeof(t=e.sent)&&(this._events.raf=t,setTimeout(function(){r._events.raf=void 0},t)),t&&this.onTick(n);case 11:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),_destroy:function(){this._events.raf=null,Object.values(this._events.cancels).forEach(doFn)}}}}

},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _knockout=require("./knockout");Object.defineProperty(exports,"knockout",{enumerable:!0,get:function(){return _interopRequireDefault(_knockout).default}});var _reactive=require("./reactive");Object.defineProperty(exports,"reactive",{enumerable:!0,get:function(){return _interopRequireDefault(_reactive).default}});var _styled=require("./styled");Object.defineProperty(exports,"styled",{enumerable:!0,get:function(){return _interopRequireDefault(_styled).default}});var _events=require("./events");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"events",{enumerable:!0,get:function(){return _interopRequireDefault(_events).default}});

},{"./events":2,"./knockout":4,"./reactive":5,"./styled":6}],4:[function(require,module,exports){
"use strict";function target(t){return{get:function(e){return e.split(".").reduce(function(t,e){return t[e]||void 0},t)}}}function config(t){return function(t,e,n,r){return{_create:function(){var t=this;this._reactive||console.error("widget should be reactive to use knockout"),this._knockout={isFirst:!0,lastRender:"",renderProp:function(e,n){n.text(target(t.state).get(e)||"")},render:function(){if(t._knockout.isFirst){var n=t.element.html(),r=n.match(/\${(.+?)}|{{(.+?)}}/g).reduce(function(e,n){var r=n.replace(/{{|}}|\${|}/g,"");return e.replace(new RegExp(n),'<span data-knockout-id="'+r+'">'+(target(t.state).get(r)||"")+"</span>")},n);t.element.html(r),"function"==typeof t.changed&&t.element.find("[data-knockout-id]").each(function(n,r){var o=e(r).attr("data-knockout-id");t.changed(o,function(n){return t._knockout.renderProp(o,e(r))})}),t._knockout.isFirst=!1}}},this._knockout.render()}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=config;

},{}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function config(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r,i){var a=e.log?function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).log.apply(e,["Reactive.js:"].concat(n))}:function(){},c=host(i).protectedProps("setState","doChanges","changed").errors();if(c)throw new Error("Propert"+(c.length>1?"ies":"y")+" "+c.map(function(e){return"this."+e})+" "+(c.length>1?"are":"is")+" reserved for reactive()");return{_create:function(){var e=this;a("REACTIVE INIT",this),this._reactive={allChanges:{},changes:{},cancels:{},index:0,getKey:function(){var t="key"+e._reactive.index++;return a(t),t},tearDown:function(t,n){delete e._reactive.cancels[n],delete t[n]},createWindow:function(){a("created window");var e=n(window),t=e.on;return e.on=function(e,r){for(var i=this,a=arguments.length,c=Array(a>2?a-2:0),o=2;o<a;o++)c[o-2]=arguments[o];t.apply(void 0,[e+"."+this.uuid,r].concat(c));var s=this._reactive.getKey();return this._reactive.cancels[s]=function(){delete i._reactive.cancels[s],n(window).off(e+"."+i.uuid,r)},this._reactive.cancels[s]},e},init:function(){a("init"),e.window||(e.window=e.createWindow()),a("Is reacting",e.react),isFn(e.react)&&(a("reacting"),e.react()),a("Is running this.listen",isFn(e.listen)),isFn(e.listen)&&(a("listening"),e.listen()),isObject(e.state)?(a("doing first state"),e.doChanges({},Object.keys(e.state))):e.state={}}},this._reactive.init()},_destroy:function(){Object.values(this._reactive.cancels).forEach(function(e){return e()})},on:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.element,i=this._reactive.getKey();return r.on(e+"."+this.uuid+i,t),this._reactive.cancels[i]=function(){r.off(e+"."+n.uuid+i,t),n._reactive.tearDown({},i)},this._reactive.cancels[i]},setState:function(e){var t=this;this.state||(this.state={}),a("this.state:",this.state,"New State: ",e);var n=clone(this.state),r=Object.keys(e).filter(function(n){return t.state[n]!==e[n]});r.length>0&&(this.state=clone(n,e),a.apply(void 0,_toConsumableArray(r.map(function(e){return e+": "+n[e]+" -> "+t.state[e]}))),this.doChanges(n,r))},extChanged:function(e,t,n){if("string"==typeof e)throw new Error("listening to an external widget by name is not yet supported");var r=this._reactive.getKey(),i=e.changed(t,n);this._reactive.cancels[r]=i},doChanges:function(e,t){var n=this;a("doing changes",t),Object.values(this._reactive.allChanges).forEach(function(t){return t(clone(e),clone(n.state),n)}),t.forEach(function(t){n._reactive.changes[t]&&Object.values(n._reactive.changes[t]).forEach(function(t){return t(clone(e),clone(n.state),n)})})},changed:function(e,t){var n=this,r=void 0;if("string"==typeof e)return this._reactive.changes[e]||(this._reactive.changes[e]={}),r=this._reactive.getKey(),this._reactive.changes[e][r]=t,this._reactive.cancels[r]=function(){return n._reactive.tearDown(n._reactive.changes[e],r)},this._reactive.cancels[r];if("function"==typeof e){var i=this._reactive.getKey();return this._reactive.allChanges[i]=e,this._reactive.cancels[i]=function(){return n._reactive.tearDown(n._reactive.allChanges,i)},this._reactive.cancels[i]}}}}}function host(e){var t=[],n={protectedProps:function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var c=i.reduce(function(t,n){return e[n]&&t.push(n),t},[]);return t=c,n},has:function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var c=i.reduce(function(t,n){return e[n]||t.push(n),t},[]);return t=c,n},errors:function(){return t.length>0?t:void 0}};return n}function clone(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return Array.isArray(t[0])?(r=[]).concat.apply(r,t):Object.assign.apply(Object,[{}].concat(t))}function isFn(e){return"function"==typeof e}function isObject(e){return"object"===(void 0===e?"undefined":_typeof(e))&&e instanceof Object&&null!==e}exports.default=config;

},{}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(s)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_stylis=require("stylis"),_stylis2=_interopRequireDefault(_stylis);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var select=function(e){if(document.querySelector)return document.querySelector(e)};function bindTo(e,t){e.forEach(function(e){t[e]=t[e].bind(t)})}var keys=Object.keys,StyleHandler=function(){function e(){_classCallCheck(this,e),this.tag=document.createElement("style"),this.tag.type="text/css",this.lastStyle="",this.head=select("head"),this.head.appendChild(this.tag),this.ready=!0,this.previousUpdate={},this.stylesToUpdate={},bindTo(["enqueStyle","removeElement","doBatch","processString"],this)}return _createClass(e,[{key:"enqueStyle",value:function(e,t){var n=this.processString(e,t);this.stylesToUpdate[e]=n,this.doBatch()}},{key:"removeElement",value:function(e){void 0!==this.stylesToUpdate[e]&&delete this.stylesToUpdate[e]}},{key:"doBatch",value:function(){var e=this;this.ready?window.requestAnimationFrame(function(){var t=keys(e.stylesToUpdate).filter(function(t){return e.stylesToUpdate[t]&&e.previousUpdate[t]!==e.stylesToUpdate[t]}).reduce(function(t,n){return t+e.stylesToUpdate[n]},"");t&&(e.tag.innerHTML=t,e.previousUpdate=e.stylesToUpdate,e.stylesToUpdate={}),e.ready=!1,e.enquedBatch=!1,e.tm&&clearTimeout(e.tm),e.tm=setTimeout(function(){e.ready=!0,e.enquedBatch&&e.doBatch()},16)}):this.enquedBatch=!0}},{key:"processString",value:function(e,t){return(0,_stylis2.default)(e,t)}}]),e}(),styleHandler=new StyleHandler,config=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{log:!1};return function(t,n,r,s){var a=e.log?console.log:function(){};return{_create:function(){n("head");this._styled={name:"ed-widget-"+r,className:".ed-widget-"+r},this.element.addClass(this._styled.name),this.updateStyles()},_destroy:function(){styleHandler.removeElement(this._styled.className)},updateStyles:function(){var e=this;a("Styles is about to update"),this.styles(function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var a=doCSS(t,r);styleHandler.enqueStyle(e._styled.className,a)})}}}};function doCSS(e,t){return e.map(function(e,n){return[e,t[n]||""]}).reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],s=n[1];return e+r+("function"==typeof s?s():s)},"")}exports.default=config;

},{"stylis":1}]},{},[3])(3)
});
